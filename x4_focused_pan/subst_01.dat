local function on_Load_Lua_File(_, file_path)
    require(file_path)
    DebugError("LUA Loader API: loaded "..file_path)
    -- Generic signal that the load completed, for use when there
    -- are inter-lua dependencies (to control loading order).
    AddUITriggeredEvent("Lua_Loader", "Loaded "..file_path)
end

local function Init()    
    --DebugError("LUA Loader API: Running Init()")
    -- Hook up an md->lua signal.
    RegisterEvent("Lua_Loader.Load", on_Load_Lua_File)
    
    -- Since lua files cannot be distributed with steam workshop stuff,
    -- but txt can, use a trick to change the package search path to
    -- also look for txt files (which can be put on steam).
    package.path = "?.txt;"..package.path
    
    -- Also call the function once on ui reload itself, to catch /reloadui
    -- commands while the md is running.
    AddUITriggeredEvent("Lua_Loader", "Ready")
end
Init()
<?xml version="1.0" encoding="UTF-8"?>
<addon name="ego_debug" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../core/coreaddon.xsd">
  <environment type="menus">
  	<file name="debug.lua" />
    <file name="Lua_Loader.lua" />
  </environment>
</addon>
